<div class="register-container">
    <div class="card register-card">
        <div class="register-header">
            <h1>Регистрация</h1>
        </div>
        <form method="POST" action="/register" class="register-form" id="registerForm">
            <div class="form-group">
                <label for="name">Полное имя</label>
                
                <div class="input-group">
                    <svg width="14" height="16" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M7 8C4.78125 8 3 6.21875 3 4C3 1.8125 4.78125 0 7 0C9.1875 0 11 1.8125 11 4C11 6.21875 9.1875 8 7 8ZM9.78125 9C12.0938 9 14 10.9062 14 13.2188V14.5C14 15.3438 13.3125 16 12.5 16H1.5C0.65625 16 0 15.3438 0 14.5V13.2188C0 10.9062 1.875 9 4.1875 9H4.71875C5.40625 9.34375 6.1875 9.5 7 9.5C7.8125 9.5 8.5625 9.34375 9.25 9H9.78125Z" fill="#3DCC0D"/>
                    </svg>

                    <input 
                        type="text" 
                        id="name" 
                        name="name" 
                        value="<%= locals.name || '' %>"
                        required
                        minlength="2"
                        maxlength="100"
                        placeholder="Введите фамилию и имя"
                    >
                </div>
            </div>
            
            <div class="form-group">
                <label for="email">Электронная почта</label>
                <div class="input-group">
                    <svg width="16" height="12" viewBox="0 0 16 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M15.6875 3.96875C15.8125 3.875 16 3.96875 16 4.125V10.5C16 11.3438 15.3125 12 14.5 12H1.5C0.65625 12 0 11.3438 0 10.5V4.125C0 3.96875 0.15625 3.875 0.28125 3.96875C1 4.53125 1.90625 5.21875 5.09375 7.53125C5.75 8 6.875 9.03125 8 9.03125C9.09375 9.03125 10.25 8 10.875 7.53125C14.0625 5.21875 14.9688 4.53125 15.6875 3.96875ZM8 8C7.25 8.03125 6.21875 7.09375 5.6875 6.71875C1.53125 3.71875 1.21875 3.4375 0.28125 2.6875C0.09375 2.5625 0 2.34375 0 2.09375V1.5C0 0.6875 0.65625 0 1.5 0H14.5C15.3125 0 16 0.6875 16 1.5V2.09375C16 2.34375 15.875 2.5625 15.6875 2.6875C14.75 3.4375 14.4375 3.71875 10.2812 6.71875C9.75 7.09375 8.71875 8.03125 8 8Z" fill="#3DCC0D"/>
                    </svg>

                    <input 
                        type="email" 
                        id="email" 
                        name="email" 
                        value="<%= locals.email || '' %>"
                        required
                        placeholder="example@mail.com"
                    >
                </div>
            </div>
            
            <div class="form-group">
                <label for="password">Пароль</label>
                <div class="input-group">
                    <svg width="14" height="16" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12.5 7C13.3125 7 14 7.6875 14 8.5V14.5C14 15.3438 13.3125 16 12.5 16H1.5C0.65625 16 0 15.3438 0 14.5V8.5C0 7.6875 0.65625 7 1.5 7H2.25V4.75C2.25 2.15625 4.375 0 7 0C9.59375 0 11.75 2.15625 11.75 4.75V7H12.5ZM9.25 7V4.75C9.25 3.53125 8.21875 2.5 7 2.5C5.75 2.5 4.75 3.53125 4.75 4.75V7H9.25Z" fill="#3DCC0D"/>
                    </svg>



                    <input 
                        type="password" 
                        id="password" 
                        name="password" 
                        required
                        minlength="8"
                        placeholder="Минимум 8 символов"
                    >
                </div>
                <small class="form-hint">Минимум 8 символов</small>
            </div>
            
            <div class="form-group">
                <label for="confirmPassword">Подтвердите пароль</label>
                <div class="input-group">
                    <svg width="14" height="16" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12.5 7C13.3125 7 14 7.6875 14 8.5V14.5C14 15.3438 13.3125 16 12.5 16H1.5C0.65625 16 0 15.3438 0 14.5V8.5C0 7.6875 0.65625 7 1.5 7H2.25V4.75C2.25 2.15625 4.375 0 7 0C9.59375 0 11.75 2.15625 11.75 4.75V7H12.5ZM9.25 7V4.75C9.25 3.53125 8.21875 2.5 7 2.5C5.75 2.5 4.75 3.53125 4.75 4.75V7H9.25Z" fill="#3DCC0D"/>
                    </svg>



                    <input 
                        type="password" 
                        id="confirmPassword" 
                        name="confirmPassword" 
                        required
                        minlength="8"
                        placeholder="Повторите пароль"
                    >
   
                </div>
            </div>
            
            
            
            <button type="submit" class="btn btn-primary register-btn" id="submitBtn">
                <span class="btn-text">Зарегистрироваться</span>
            </button>
        </form>
        
        <div class="register-footer">
            <p>Уже есть аккаунт?</p>
            <a href="/login" class="login-link">Войти в систему</a>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
   
    setupPasswordToggle('password', 'togglePassword');
    setupPasswordToggle('confirmPassword', 'toggleConfirmPassword');
    
    // Валидация формы
    const form = document.getElementById('registerForm');
    const submitBtn = document.getElementById('submitBtn');
    const btnText = submitBtn.querySelector('.btn-text');
    const btnSpinner = submitBtn.querySelector('.btn-spinner');
    
    form.addEventListener('submit', function(e) {
        const password = document.getElementById('password').value;
        const confirmPassword = document.getElementById('confirmPassword').value;
        const terms = document.getElementById('terms').checked;
        
        if (password !== confirmPassword) {
            e.preventDefault();
            alert('Пароли не совпадают!');
            return false;
        }
        
       
        
        // Показываем индикатор загрузки
        btnText.style.display = 'none';
        btnSpinner.style.display = 'inline-block';
        submitBtn.disabled = true;
        
        return true;
    });
    
    // Динамическая проверка совпадения паролей
    const passwordInput = document.getElementById('password');
    const confirmInput = document.getElementById('confirmPassword');
    
    function checkPasswords() {
        if (passwordInput.value && confirmInput.value) {
            if (passwordInput.value !== confirmInput.value) {
                confirmInput.setCustomValidity('Пароли не совпадают');
            } else {
                confirmInput.setCustomValidity('');
            }
        }
    }
    
    passwordInput.addEventListener('input', checkPasswords);
    confirmInput.addEventListener('input', checkPasswords);
});
</script>